"use strict";(self.webpackChunkjakarta_subway=self.webpackChunkjakarta_subway||[]).push([[13074],{2144(e,t,n){n.d(t,{b:()=>a});var i=n(18690),o=n(54901),s=n(50346),r=n(75540);class a{constructor(){this._currentOperationSignal=(0,r.v)(null)}get currentOperationType(){var e,t;return null!==(e=null===(t=this._currentOperationSignal.value)||void 0===t?void 0:t.type)&&void 0!==e?e:null}destroy(){this.stop()}async start(e,t,n){const r=this._currentOperationSignal.value;null===r||void 0===r||r.stop();const a=new AbortController,l=null===n||void 0===n?void 0:n.signal,u=AbortSignal.any([a.signal,l].filter(i.Ru)),c=(0,s.Tw)();let p=!1;const h=()=>{p||(p=!0,c.reject((0,s.NK)()))},d={type:e,resolve:e=>{p||(p=!0,c.resolve(e))},reject:h,promise:c.promise,stop:()=>a.abort(),handles:[]};this._currentOperationSignal.value=d,d.handles.push((0,s.u7)(l,()=>{a.abort()}),(0,s.u7)(u,()=>{(0,o.a0)(d.handles),p||h()}));try{return r&&(await r.promise.catch(()=>{}),(0,s.Te)(u)),await t(d,u),await c.promise}finally{(0,o.a0)(d.handles),this._currentOperationSignal.value===d&&(this._currentOperationSignal.value=null)}}stop(){var e;null===(e=this._currentOperationSignal.value)||void 0===e||e.stop()}}},27631(e,t,n){n.d(t,{A:()=>o});var i=n(50076);class o extends i.A{constructor(e,t,n){super(e,t,n),this.name="unknown",this.name=e}}},40615(e,t,n){n.d(t,{Q:()=>y});var i=n(6326),o=n(91967),s=n(68134),r=n(46053),a=(n(81806),n(76460),n(47249),n(87990)),l=n(45564),u=n(69098),c=n(56002),p=n(19247),h=n(57919),d=n(31633);function v(e,t,n){return null==e?null:(0,d.oU)(e*t,"meters",n)}function g(e,t,n){return null==e?null:(0,d.oU)(e*t,"meters",n)}let m=class extends u.Pw{constructor(e){super(e),this._getSamplesMemoized=(0,c.B)((e,t)=>function(e,t){if(null==e||null==t)return null;const{samples:n,spatialReference:i}=e,{distance:o,elevation:s}=t,r=(0,d.GA)(i),a=(0,d.G9)(i),l=n.length,u=new Array(l);for(let c=0;c<l;++c){const e=n[c],t=e.sampledZ,i=e.coordinate;u[c]={x:i[0],y:i[1],z:t,distance:v(e.distance,r,o),elevation:g(t,a,s)}}return u}(e,t)),this._getStatisticsMemoized=(0,c.B)((e,t)=>function(e,t){if(null==e||null==t||null==e.statistics||null==e.spatialReference)return null;const{distance:n,elevation:i}=t,{statistics:o,spatialReference:s}=e,r=(0,d.GA)(s),a=(0,d.G9)(s);return{maxDistance:v(o.maxDistance,r,n),minElevation:g(o.minElevation,a,i),maxElevation:g(o.maxElevation,a,i),avgElevation:g(o.avgElevation,a,i),elevationGain:g(o.elevationGain,a,i),elevationLoss:g(o.elevationLoss,a,i),maxPositiveSlope:o.maxPositiveSlope,maxNegativeSlope:o.maxNegativeSlope,avgPositiveSlope:o.avgPositiveSlope,avgNegativeSlope:o.avgNegativeSlope}}(e,t)),this.rawResult=null}get available(){const{computation:e}=this;return e.profile.enabled&&e.available}get profile(){return this.computation.profile}get progress(){return(0,h.xi)(null!=this.rawResult&&this.computation.profile.enabled?this.rawResult.progress:0)}get samples(){return this._getSamplesMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get statistics(){return this._getStatisticsMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get hoveredPoint(){if(!this.computation.profile.enabled)return null;const e=this.computation.controller.analysisViewData.hoveredPosition;if(null==e)return null;const{rawResult:t,samples:n}=this;if(null==n||null==t)return null;const i=n.length;if(0===i)return null;const o=n[i-1].distance,s=(0,h.qX)(n,e*o,e=>e.distance);if(null==s)return null;const{x:r,y:a,z:l}=s;return null==l?null:new p.A({x:r,y:a,z:l,spatialReference:t.spatialReference})}};(0,i.Cg)([(0,r.MZ)()],m.prototype,"available",null),(0,i.Cg)([(0,r.MZ)({readOnly:!0})],m.prototype,"profile",null),(0,i.Cg)([(0,r.MZ)({readOnly:!0})],m.prototype,"progress",null),(0,i.Cg)([(0,r.MZ)()],m.prototype,"samples",null),(0,i.Cg)([(0,r.MZ)()],m.prototype,"statistics",null),(0,i.Cg)([(0,r.MZ)({constructOnly:!0})],m.prototype,"computation",void 0),(0,i.Cg)([(0,r.MZ)()],m.prototype,"rawResult",void 0),(0,i.Cg)([(0,r.MZ)()],m.prototype,"hoveredPoint",null),m=(0,i.Cg)([(0,a.$)("esri.views.analysis.ElevationProfile.ElevationProfileResult")],m);let y=class extends o.A{constructor(e){super(e),this.result=new m({computation:this}),this.numSamplesForPreview=30,this.numSamplesPerChunk=200}initialize(){this.addHandles([(0,s.wB)(()=>{const{geometry:e,elevationInfo:t}=this.controller.analysis;return[e,t]},()=>this.onInvalidate(this),s.OH)])}setResult(e){this.result.rawResult=e}clearResult(){this.setResult(null)}get progress(){return this.result.progress}get hoveredPoint(){return this.result.hoveredPoint}get available(){return!0}get minDemResolution(){return(0,l.zj)().defaultDemResolution}};(0,i.Cg)([(0,r.MZ)({constructOnly:!0})],y.prototype,"controller",void 0),(0,i.Cg)([(0,r.MZ)({constructOnly:!0})],y.prototype,"profile",void 0),(0,i.Cg)([(0,r.MZ)({constructOnly:!0})],y.prototype,"onInvalidate",void 0),(0,i.Cg)([(0,r.MZ)()],y.prototype,"result",void 0),(0,i.Cg)([(0,r.MZ)({readOnly:!0})],y.prototype,"progress",null),(0,i.Cg)([(0,r.MZ)()],y.prototype,"hoveredPoint",null),(0,i.Cg)([(0,r.MZ)()],y.prototype,"available",null),(0,i.Cg)([(0,r.MZ)()],y.prototype,"numSamplesForPreview",void 0),(0,i.Cg)([(0,r.MZ)()],y.prototype,"numSamplesPerChunk",void 0),(0,i.Cg)([(0,r.MZ)({readOnly:!0})],y.prototype,"minDemResolution",null),y=(0,i.Cg)([(0,a.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineComputation")],y)},43825(e,t,n){n.d(t,{V:()=>E});var i=n(89379),o=n(19495),s=n(6326),r=n(91967),a=n(18690),l=n(98773),u=n(80674),c=n(54901),p=n(53084),h=n(53521),d=n(43927),v=n(30726),g=n(50346),m=n(68134),y=n(79468),f=n(31633),_=n(46053),w=(n(81806),n(76460),n(87990)),C=n(71630),b=n(12482),M=n(19747),S=n(731),P=n(45564),Z=n(27631),R=n(47453),k=n(57919),A=n(80397);let E=class extends r.A{constructor(e){super(e),this.error=null,this._getStableEffectiveUnits=(0,u.f)(()=>{var e,t;const n=(0,A.DM)(this._activeComputations.map(e=>e.result.rawResult)),i=this.analysis.displayUnits,o=(0,M.c)(this.view);return{distance:(0,f.Vs)(n.maxDistance,"meters",null!==(e=i.distance)&&void 0!==e?e:o),elevation:(0,f.jE)(n.maxElevation,"meters",null!==(t=i.elevation)&&void 0!==t?t:o)}},p.gh),this._updateTask=null,this._queue=null,this._currentTileCache=null,this._parametersPerComputation=new Map,this._getStableUpdateParameters=(0,u.f)(()=>{var e;return{stationary:null===(e=this.view.stationary)||void 0===e||e,activeComputations:this._activeComputations,generationParameters:this._generationParameters}},p.gh),this._getStableGenerationParameters=(0,u.f)(()=>{const{view:e,analysis:t}=this;return null!==e&&void 0!==e&&e.ready&&this._queue?{view:e,geometry:t.geometry,geometryIsValid:t.valid,elevationInfo:this.elevationInfo,queue:this._queue,cache:this._tileCache,options:this._options,slicePlane:"3d"===e.type?e.slice.plane:null}:null},p.gh),this._getStableElevationInfo=(0,u.f)(()=>{var e;return null!==(e=this.analysis.elevationInfo)&&void 0!==e?e:x},v.CM),this._getStableOptions=(0,u.f)(()=>{var e;const{densificationMaxSamples:t,defaultDemResolution:n,maxTotalSamples:i}=(0,P.zj)();let o=null!==(e=this._minDemResolution)&&void 0!==e?e:n;return o=parseFloat(o.toFixed(2)),{samplingDistance:o,densificationMaxSamples:Math.round(t/this._activeComputations.length),maxTotalSamples:i}},p.gh),this._updateThrottled=(0,y.n)(e=>this._update(e),(0,P.zj)().updateThrottleMillis)}initialize(){this._computationsCollection=(0,d.L)(()=>this.analysis.profiles,e=>this.computationFactory.create({controller:this,profile:e,onInvalidate:e=>this._invalidateComputation(e)}),{recycleItems:!0}),this.addHandles([this._computationsCollection.on("change",()=>{this._parametersPerComputation.clear(),this._updateThrottled(this._updateParameters)}),(0,m.wB)(()=>this._updateParameters,e=>this._updateThrottled(e),m.pc),this._updateThrottled]);const e="3d"===this.view.type?this.view.resourceController:void 0;this._queue=(0,k.LD)(null===e||void 0===e?void 0:e.scheduler),null===e||void 0===e||e.addUpdatingObject(this)}destroy(){var e;this._abortUpdate(),this._parametersPerComputation.clear(),null!==(e=this._computationsCollection)&&void 0!==e&&e.destroy(),this._queue=(0,v.pR)(this._queue),this._currentTileCache=(0,v.pR)(this._currentTileCache)}get effectiveDisplayUnits(){return this._getStableEffectiveUnits()}get progress(){let e=0,t=0;for(const n of this._activeComputations)e++,t+=n.progress;return(0,k.xi)(e>0?t/e:0)}get updating(){var e;const{progress:t}=this,n=!(null===(e=this._queue)||void 0===e||!e.updating),i=this._updateThrottled.hasPendingUpdates(),o=null!=this._updateTask&&!this._updateTask.finished;return n||i||o||t>0&&t<1}get results(){return this._computations.map(e=>e.result)}get statistics(){return(0,A.ch)(this._activeComputations.map(e=>e.result.statistics))}get hoveredPoints(){return this._computations.map(e=>e.hoveredPoint)}onElevationChange(e){const{view:t}=this;return"3d"===(null===t||void 0===t?void 0:t.type)?(0,m.on)(()=>t.elevationProvider,"elevation-change",e,{onListenerAdd:e,onListenerRemove:e}):(0,c.hA)()}get _tileCache(){this._currentTileCache=(0,v.pR)(this._currentTileCache);const e=this.view;if("3d"===(null===e||void 0===e?void 0:e.type)){var t;const n=null===(t=e.basemapTerrain)||void 0===t?void 0:t.elevationQueryCache;if(null!=n)return n}return null==this._currentTileCache&&(this._currentTileCache=new C.E(new h.q(20971520))),this._currentTileCache}get _computations(){var e,t;return null!==(e=null===(t=this._computationsCollection)||void 0===t?void 0:t.toArray())&&void 0!==e?e:[]}get _activeComputations(){return this._computations.filter(e=>e.profile.enabled&&e.available)}get _minDemResolution(){const e=this._minDemResolutions;return e.length>0?(0,a.jk)(e):null}get _minDemResolutions(){const e=[];for(const{minDemResolution:t}of this._activeComputations)null!=t&&e.push(t);return e}get _updateParameters(){return this._getStableUpdateParameters()}get _generationParameters(){return this._getStableGenerationParameters()}get elevationInfo(){return this._getStableElevationInfo()}get _options(){return this._getStableOptions()}_update(e){let{stationary:t,activeComputations:n,generationParameters:s}=e;this._abortUpdate(),t&&(null!=s?this._updateTask=(0,l.UT)(async e=>{this.error=null;const t=n.filter(e=>!this._isComputationValid(e,s));try{if(!s.geometryIsValid)throw new R.ON;const n=(0,k.uK)((0,i.A)((0,i.A)({},s),{},{providers:t}),{signal:e});let h=!1;var r,a=!1,l=!1;try{for(var u,c=(0,o.A)(n);a=!(u=await c.next()).done;a=!1){const n=u.value;(0,g.Te)(e),h||(this._clearInvalidResults(s),h=!0);for(let e=0;e<t.length;e++)t[e].setResult(n[e])}}catch(p){l=!0,r=p}finally{try{a&&null!=c.return&&await c.return()}finally{if(l)throw r}}for(const e of t)this._parametersPerComputation.set(e,s)}catch(h){(0,g.QP)(h),this._abortUpdate(),this.error=h instanceof Z.A?h:new R.Bk,t.forEach(e=>{e.clearResult()})}}):this._clearResults())}_abortUpdate(){this._updateTask=(0,v.DC)(this._updateTask)}_isComputationValid(e,t){return this._parametersPerComputation.has(e)&&this._parametersPerComputation.get(e)===t}_invalidateComputation(e){this._parametersPerComputation.delete(e),this._updateThrottled(this._updateParameters)}_clearInvalidResults(e){for(const t of this._computations)this._isComputationValid(t,e)||(t.clearResult(),this._parametersPerComputation.delete(t))}_clearResults(){for(const e of this._computations)e.clearResult(),this._parametersPerComputation.delete(e)}};(0,s.Cg)([(0,_.MZ)({constructOnly:!0})],E.prototype,"analysis",void 0),(0,s.Cg)([(0,_.MZ)({constructOnly:!0})],E.prototype,"analysisViewData",void 0),(0,s.Cg)([(0,_.MZ)({constructOnly:!0})],E.prototype,"computationFactory",void 0),(0,s.Cg)([(0,_.MZ)({constructOnly:!0})],E.prototype,"view",void 0),(0,s.Cg)([(0,_.MZ)()],E.prototype,"error",void 0),(0,s.Cg)([(0,_.MZ)({readOnly:!0})],E.prototype,"effectiveDisplayUnits",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"progress",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"updating",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"results",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"statistics",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"hoveredPoints",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_updateTask",void 0),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_queue",void 0),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_tileCache",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_computationsCollection",void 0),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_computations",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_activeComputations",null),(0,s.Cg)([(0,_.MZ)({readOnly:!0})],E.prototype,"_minDemResolution",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_minDemResolutions",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_updateParameters",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_generationParameters",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"elevationInfo",null),(0,s.Cg)([(0,_.MZ)()],E.prototype,"_options",null),E=(0,s.Cg)([(0,w.$)("esri.views.analysis.ElevationProfile.ElevationProfileController")],E);const x=new S.A((0,i.A)({},b.qt))},45564(e,t,n){n.d(t,{WG:()=>s,zj:()=>o});n(54901);let i={noDataValue:-5e5,defaultQueryOptions:()=>({noDataValue:i.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0,signal:null}),updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:(0,n(31633).oU)(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,profileLinesUpdateThrottleMillis:100,hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function o(){return i}const s={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null}},47453(e,t,n){n.d(t,{Bk:()=>a,ON:()=>s,Zz:()=>o,oU:()=>r});var i=n(27631);class o extends i.A{constructor(){super("too-complex","The input geometry has too many points.")}}class s extends i.A{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class r extends i.A{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class a extends i.A{constructor(){super("unknown","Unknown error.")}}},49636(e,t,n){n.d(t,{s:()=>u});var i=n(6326),o=n(68134),s=n(46053),r=(n(81806),n(76460),n(47249),n(87990)),a=n(40615),l=n(61607);let u=class extends a.Q{constructor(){super(...arguments),this.type="query",this.numSamplesForPreview=50,this.numSamplesPerChunk=500}get minDemResolution(){return(0,l.e)(this.profile.source)}get available(){const{source:e}=this.profile;return!!e&&(null==e.visible||e.visible)&&(null==e.layers||e.layers.some(e=>e.visible))}initialize(){this.addHandles((0,o.wB)(()=>this.profile.source,()=>this.onInvalidate(this),o.OH))}queryElevation(e,t){if(!this.profile.source)throw new Error("No source configured for the elevation profile line");return this.profile.source.queryElevation(e,t)}};(0,i.Cg)([(0,s.MZ)({readOnly:!0})],u.prototype,"minDemResolution",null),(0,i.Cg)([(0,s.MZ)()],u.prototype,"available",null),u=(0,i.Cg)([(0,r.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineQueryComputation")],u)},49853(e,t,n){n.d(t,{a:()=>u});var i=n(6326),o=n(54099),s=n(54901),r=n(91291),a=n(46053),l=(n(81806),n(76460),n(47249),n(87990));let u=class extends((0,r.g)(o.nJ)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){var e,t;return null===(e=(null===(t=this.parent)||void 0===t?void 0:t.visible)&&!this.parent.suspended)||void 0===e||e}set visible(e){this._overrideIfSome("visible",e)}forceInteractive(){return this._interactiveViewModelCount++,(0,s.hA)(()=>this._interactiveViewModelCount--)}};(0,i.Cg)([(0,a.MZ)({constructOnly:!0})],u.prototype,"parent",void 0),(0,i.Cg)([(0,a.MZ)({constructOnly:!0})],u.prototype,"view",void 0),(0,i.Cg)([(0,a.MZ)({type:Boolean})],u.prototype,"interactive",null),(0,i.Cg)([(0,a.MZ)()],u.prototype,"_userInteractive",void 0),(0,i.Cg)([(0,a.MZ)({readOnly:!0})],u.prototype,"updating",null),(0,i.Cg)([(0,a.MZ)()],u.prototype,"visible",null),(0,i.Cg)([(0,a.MZ)()],u.prototype,"_interactiveViewModelCount",void 0),u=(0,i.Cg)([(0,l.$)("esri.views.analysis.AnalysisView")],u)},55964(e,t,n){n.d(t,{Ai:()=>v,Rg:()=>C,VJ:()=>x,_W:()=>M,lM:()=>w,yK:()=>_});var i=n(15941),o=n(50346),s=n(31633),r=n(19555),a=n(20664),l=n(23701),u=n(56611),c=n(13312),p=n(7137),h=n(12482),d=n(47453);async function v(e,t,i,r,a,l,h){let v,y,f;const _=e.spatialReference,w=_.isGeographic||_.isWebMercator;let C=0;if(!w){const{execute:t}=await n.e(89227).then(n.bind(n,89227));(0,o.Te)(h),C=t(e,{unit:"meters"}),(0,o.Te)(h)}const b=1/(0,s.GA)(r);if(w){await(0,u.initializeProjection)([{source:_,dest:r},{source:_,dest:c.A.WGS84}],h);const n=function(e){return(0,p.TT)(e.spatialReference)?e:(0,u.project)(e,c.A.WGS84)}(e);v=(0,p.l1)([n],"meters")[0];const o=g(v,a);if(D(e,v,o)>l)throw new d.Zz;const s=m(n,t,i);({densifiedPath:y,distances:f}=function(e,t,n){const{hasZ:i}=e;return S(e,t,n,P,i?k:R)}(s,o,b)),y=(0,u.project)(y,r)}else{await(0,u.initializeProjection)([{source:_,dest:r}],h),v=C;const n=g(v,a);if(D(e,v,n)>l)throw new d.Zz;const s=m(e,t,i);({densifiedPath:y,distances:f}=function(e,t,n){const{hasZ:i}=e;return S(e,t,n,Z,i?E:A)}(s,n,b)),(0,o.Te)(h),y=(0,u.project)(y,r)}return{densifiedPath:y,pathLength:v*b,distances:f}}function g(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function m(e,t,n){if(null==t)return y(e);const i=e.spatialReference,o=t.mode,s=(0,h.Ze)(t,i);let r=null;switch(n.type){case"2d":r=function(e,t,n){let{hasZ:i}=e;return"absolute-height"===t?i?e=>{let[t,i,o]=e;return[t,i,o+n]}:e=>{let[t,i]=e;return[t,i,n]}:null}(e,o,s);break;case"3d":r=function(e,t,n,i){let{spatialReference:o,hasZ:s}=e,{elevationProvider:r}=i;const a=(e,t,n,i)=>{var s;return null!==(s=null===r||void 0===r?void 0:r.getElevation(e,t,n,o,i))&&void 0!==s?s:0};switch(t){case"on-the-ground":return e=>{let[t,n]=e;return[t,n,a(t,n,0,"ground")]};case"absolute-height":return s?e=>{let[t,i,o]=e;return[t,i,o+n]}:e=>{let[t,i]=e;return[t,i,n]};case"relative-to-ground":return s?e=>{let[t,i,o]=e;return[t,i,o+a(t,i,o,"ground")+n]}:e=>{let[t,i]=e;return[t,i,a(t,i,0,"ground")+n]};case"relative-to-scene":return s?e=>{let[t,i,o]=e;return[t,i,o+a(t,i,o,"scene")+n]}:e=>{let[t,i]=e;return[t,i,a(t,i,0,"scene")+n]};default:return null}}(e,o,s,n)}return null==r?y(e):new l.A({hasZ:!0,hasM:!1,spatialReference:i,paths:f(e.paths,r)})}function y(e){return e.hasZ?new l.A({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:f(e.paths,e=>{let[t,n]=e;return[t,n]})}):e}function f(e,t){const n=e.length,i=new Array(n);for(let o=0;o<n;++o){const n=e[o],s=n.length,r=new Array(n.length);i[o]=r;for(let e=0;e<s;++e)r[e]=t(n[e])}return i}function _(e){return C(e)&&e.paths.some(e=>e.length>1)}function w(e){return function(e){return b(e)&&C(null===e||void 0===e?void 0:e.geometry)}(e)&&_(e.geometry)}function C(e){return!b(e)&&null!=e&&"polyline"===e.type}function b(e){return null!=e&&"geometry"in e}function M(e){const t=null===e||void 0===e?void 0:e.layer;return null!=t&&"graphics"===t.type&&t.internal}function S(e,t,n,o,r){const{spatialReference:a,hasZ:u}=e,c={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:a,metersPerSR:(0,s.GA)(a)},p=[],h=[];let d=0;for(let s=0;s<e.paths.length;++s){const a=e.paths[s],l=new Array,u=new Array;let v=0;for(let e=1;e<a.length;++e){const s=a[e-1],p=a[e],h=o(c,s,p);let g;for(g=v;g<h.distance&&!(0,i.Io)(g,h.distance);g+=t)l.push(r(h,g)),u.push((d+g)*n);v=g-h.distance,d+=h.distance,l.push(p),u.push(d*n)}p[s]=l,h[s]=u}return{densifiedPath:new l.A({spatialReference:a,hasZ:u,paths:p}),distances:h}}function P(e,t,n){return e.distance=0,(0,p._3)(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function Z(e,t,n){return e.from=t,e.to=n,e.distance=(0,r.Io)(n,t)*e.metersPerSR,e}function R(e,t){let{from:n,azimuth:i,spatialReference:o}=e;return(0,p.vN)([0,0],n,i,t,o)}function k(e,t){let{from:n,to:o,azimuth:s,distance:r,spatialReference:a}=e;const l=t/r,u=[0,0,(0,i.Cc)(n[2],o[2],l)];return(0,p.vN)(u,n,s,t,a),u}function A(e,t){let{from:n,to:i,distance:o}=e;return(0,r.Cc)([0,0],n,i,t/o)}function E(e,t){let{from:n,to:i,distance:o}=e;return(0,a.l)([0,0,0],n,i,t/o)}function x(e){return e.paths.reduce((e,t)=>e+t.length,0)}function D(e,t,n){return x(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(e=>1+e,0)-1)}},55980(e,t,n){n.d(t,{T:()=>o});var i=n(48384);function o(e,t){null!==e&&void 0!==e||(e=[]);const n=e.length-1,o=[];let s=[];for(let i=0;i<=n;i++){const{x:t,y:r,z:a}=e[i];null!=a&&s.push([t,r,a]),i!==n&&null!=a||!s.length||(o.push(s),s=[])}return(0,i.LZ)(o,t,!0)}},57919(e,t,n){n.d(t,{qX:()=>E,LD:()=>S,uK:()=>w,xi:()=>x});var i=n(89379),o=n(56218),s=n(10600),r=n(18690),a=n(15941),l=n(50346),u=n(66388),c=n(5262),p=n(80963),h=n(45564),d=n(47453),v=n(55964),g=n(80397);function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e>=t)return n;if(n.push(e),t-e<2)return n;const i=t-1;n.push(i);const o=y(e+1,i);for(;;){const e=o.next();if(e.done)break;n.push(e.value)}return n}function*y(e,t){if(e>=t)return;const n=e+Math.floor((t-e)/2);yield n;const i=y(e,n),o=y(n+1,t);for(;;){const e=i.next(),t=o.next();if(e.done&&t.done)break;e.done||(yield e.value),t.done||(yield t.value)}}var f=n(27243),_=n(59752);function w(e,t){return C.apply(this,arguments)}function C(){return C=(0,s.A)(function*(e,t){var n;const{view:s,geometry:r,elevationInfo:a,providers:u,options:c}=e,p=s.spatialReference;if(!p||null==r||!(0,v.yK)(r))throw new d.ON;const g=u.length;if(0===g)return null;const m=Math.round(c.maxTotalSamples/g);if((0,v.VJ)(r)>m)throw new d.Zz;const y=yield(0,o.A)((0,v.Ai)(r,a,s,p,c,m,t));(0,l.Te)(t);let f=0;const _=new Array(g),w=new Array(g);for(let o=0;o<g;o++){const n=Z(y);_[o]=n,f+=n.samples.length;const s=(0,i.A)((0,i.A)({},e),{},{provider:u[o],result:n,densificationResult:y});w[o]=b(s,t)[Symbol.iterator]()}if(f>c.maxTotalSamples)throw new d.Zz;const C=yield(0,o.A)(Promise.all(w.map(e=>{const t=e.next();return!0===t.done?Promise.resolve(null):t.value})));(0,l.Te)(t);for(let i=0;i<g;i++)_[i]=C[i];yield _,yield(0,o.A)((0,l.Pl)(null!==(n=e.delayAfterPreview)&&void 0!==n?n:(0,h.zj)().delayAfterPreviewMillis,null,t.signal)),(0,l.Te)(t);const M=[];try{let e;do{e=!1;for(let t=0;t<g;t++){const n=w[t].next();!1===n.done&&(M.push({resultPromise:n.value,index:t}),e=!0)}}while(e)}finally{w.forEach(e=>{var t;return null===(t=e.return)||void 0===t?void 0:t.call(e)})}for(const{resultPromise:i,index:h}of M)_[h]=yield(0,o.A)(i),(0,l.Te)(t),yield _;for(const i of _)null!=i&&(i.progress=1);yield _}),C.apply(this,arguments)}function*b(e,t){const{densificationResult:n}=e,o=(0,i.A)((0,i.A)({},e),{},{abortOptions:t,densificationResult:n}),s=m(0,o.result.samples.length),a=s.slice(0,o.provider.numSamplesForPreview);yield M(o,a,!0);const l=(0,r.Ho)(s,o.provider.numSamplesPerChunk);for(const i of l)yield M(o,i,!1)}async function M(e,t,n){let{densificationResult:o,result:s,provider:r,queue:a,abortOptions:c,cache:p}=e;const{densifiedPath:d,pathLength:v}=o,g=s.spatialReference,{samples:m}=s,y=[];for(let i=0;i<t.length;i++){const e=m[t[i]];y[i]=[...e.coordinate]}try{return await a.push({geometry:new u.A({spatialReference:g,points:y,hasZ:d.hasZ}),provider:r,indices:t,preview:n,result:s,parameters:(0,i.A)((0,i.A)({},(0,h.zj)().defaultQueryOptions()),{},{minDemResolution:n?Math.round(v/r.numSamplesForPreview):Math.round(v/m.length),cache:p})},c),(0,i.A)({},s)}catch(f){return(0,l.zf)(f)?null:h.WG}}function S(e){return new f.F({priority:_.W6.ELEVATION_PROFILE,concurrency:1,scheduler:e,process:async e=>{(0,l.Te)(e.parameters);try{await async function(e){let{geometry:t,provider:n,indices:i,preview:o,result:s,parameters:r}=e;if(0===i.length)return;const a=(await async function(e,t,n){try{return await e.queryElevation(t,n)}catch(o){throw new d.oU}}(n,t,r)).geometry,{hasZ:l,points:u}=a,c=r.noDataValue,{samples:p}=s;for(let h=0;h<i.length;h++){const e=p[i[h]];if(e.isHole)continue;const t=l?u[h][2]:null;null===t||t===c?e.sampledZ=null:(s.hasZ=!0,e.sampledZ=t),e.sampled=!0}(function(e){const t=e.length-1;let n=0;for(let i=1;i<=t;i++)(e[i].sampled||i===t)&&(P(e,n,i),n=i)})(p),s.progress=o?0:s.progress+i.length/p.length,s.statistics=(0,g.mW)(s.samples,s.spatialReference)}(e)}catch(t){(0,l.jH)(t)}}})}function P(e,t,n){if(n-t===1)return;const i=e[t],o=i.sampledZ,s=e[n],r=s.sampledZ;if(null==o||null==r){for(let i=t+1;i<n;i++)e[i].sampledZ=null;return}const l=i.distance,u=s.distance-l;for(let c=t+1;c<n;c++){const t=e[c],n=(t.distance-l)/u;t.sampledZ=(0,a.Cc)(o,r,n)}}function Z(e){let{densifiedPath:t,distances:n}=e;const i=t.spatialReference,o=(0,p.Vp)(i),s=t.paths,r=s.length,a=[];let l=null,u=0;for(let p=0;p<r;p++){const e=s[p],t=e.length,i=n[p];for(let n=0;n<t;n++){const t=e[n],s=i[n];o&&(t[0]=(0,c.N6)(t[0],o.valid[0],o.valid[1])),l&&0===n&&R(a,l,t,u,s),a.push(k(t,s)),l=t,u=s}}return{progress:0,samples:a,hasZ:!1,statistics:null,spatialReference:i}}function R(e,t,n,i,o){e.push(A(t,i)),e.push(A(n,o))}function k(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!1,isHole:!1}}function A(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!0,isHole:!0}}function E(e,t,n){if(!e||0===e.length)return;const i=e.length-1,o=e[0];if(t<=n(o))return o;const s=e[i];if(t>=n(s))return s;let r=0,a=0,l=i;for(;r<l;){a=r+Math.floor((l-r)/2);const o=e[a],s=n(o);if(s===t)return o;if(t<s){if(a>0){const i=e[a-1],r=n(i);if(t>r)return t-r>=s-t?o:i}l=a}else{if(a<i){const i=e[a+1],r=n(i);if(t<r)return t-s>=r-t?i:o}r=a+1}}return e[a]}function x(e){return e>.999999?1:e}},61607(e,t,n){n.d(t,{W:()=>a,e:()=>r});var i=n(18690),o=n(31633),s=n(97153);function r(e){var t;if(null==e)return null;if((0,s.Q)(e))return a(e);const n=e.tileInfo;if(null==n)return null;const i=null===(t=n.lods)||void 0===t?void 0:t.at(-1);return null==i?null:i.resolution*(0,o.GA)(n.spatialReference)}function a(e){var t;if(null==e)return null;const n=e.layers.items.map(l).filter(i.Ru);return null!==(t=(0,i.jk)(n))&&void 0!==t?t:null}function l(e){return e&&"tileInfo"in e?r(e):null}},62068(e,t,n){n.d(t,{o:()=>d});var i=n(6326),o=n(80674),s=n(53084),r=n(30726),a=n(68134),l=n(46053),u=(n(81806),n(76460),n(87990)),c=n(62078),p=n(80635),h=n(40615);let d=class extends h.Q{constructor(){super(...arguments),this.type="input",this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this._getStableElevationDependencies=(0,o.f)(()=>{const{view:e}=this.controller;if(!e)return null;const t=this._getStableElevationInfo();return{view:e,stationary:!this._requiresElevationAlignment||e.stationary,elevationInfo:t,visibleLayerIds:this._getStableLayerIds(),spatialReference:this._getStableSpatialReference()}},s.gh),this._getStableElevationInfo=(0,o.f)(()=>this.controller.elevationInfo,r.CM),this._getStableSpatialReference=(0,o.f)(()=>{var e;return null===(e=this.controller.view)||void 0===e?void 0:e.spatialReference},r.CM),this._getStableLayerIds=(0,o.f)(()=>{const{view:e}=this.controller;return"3d"!==e.type?[]:(0,p.Y)(e)},s.gh)}initialize(){const e=()=>this.onInvalidate(this);this.addHandles([(0,a.wB)(()=>this._queryElevationDependencies,e,a.OH),this.controller.onElevationChange(e)])}async queryElevation(e,t){let{noDataValue:n,signal:i}=t;const o=this._queryElevationDependencies;if(null==o)throw new Error("".concat(this.declaredClass,": no dependencies"));const{view:s,spatialReference:r}=o;if(this._requiresElevationAlignment&&"3d"===s.type&&r){const t=await c.q.fromGeometry(e).project(r,i);if(!t)return{geometry:e,noDataValue:n};const o=s.elevationProvider;return t.coordinates.forEach(e=>{var t;e.z=null!==(t=o.getElevation(e.x,e.y,0,r,"ground"))&&void 0!==t?t:0}),{geometry:t.export(),noDataValue:n}}return{geometry:e,noDataValue:n}}get _requiresElevationAlignment(){var e;return"on-the-ground"===(null===(e=this.controller.elevationInfo)||void 0===e?void 0:e.mode)&&"3d"===this.controller.view.type}get _queryElevationDependencies(){return this._getStableElevationDependencies()}};(0,i.Cg)([(0,l.MZ)()],d.prototype,"_queryElevationDependencies",null),d=(0,i.Cg)([(0,u.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineInputComputation")],d)},71143(e,t,n){n.d(t,{R:()=>Z});var i=n(89379),o=n(6326),s=n(39356),r=n(91967),a=n(98773),l=n(19276),u=(n(81806),n(54901)),c=n(30726),p=n(50346),h=n(68134),d=n(46053),v=(n(76460),n(47249),n(87990)),g=n(19451),m=n(63733),y=n(12482),f=n(89465),_=n(7246),w=n(731),C=n(2144),b=n(55964),M=n(57308),S=n(81335),P=n(18279);let Z=class extends r.A{constructor(e){super(e),this._sketchViewModels=new l.A,this._updatingHandles=new g.U,this._operationManager=new C.b}initialize(){const{view:e}=this;this._graphicsLayer=new m.A({listMode:"hide",internal:!0}),this.addHandles([(0,h.wB)(()=>({map:e.map,internalGraphicsLayer:this._graphicsLayer,state:this.state,geometryVisualizationVisible:this._analysis.viewOptions.geometryVisualizationVisible,visible:this.analysisViewData.visible}),e=>{let{map:t,internalGraphicsLayer:n,state:i,geometryVisualizationVisible:o,visible:s}=e;!function(e,t){t&&(t.removeFromParent(),null===e||void 0===e||e.add(t))}(t,n);const r=this.sketchGraphic;switch(r&&(r.visible=s),i){case"idle":case"reshaping-disabled":r&&!o&&(r.visible=!1),this._operationManager.stop(),this._ensureUpdatedSketchGraphic();break;case"reshaping":(0,p.QZ)(this._startReshape());break;case"awaiting-sketch":this.analysisViewData.interactive=!0}},h.pc),(0,h.wB)(()=>this._analysis.elevationInfo,e=>{this._graphicsLayer.elevationInfo=e},h.pc)])}destroy(){var e;this._operationManager.destroy(),this._sketchViewModels.drain(e=>(0,c.pR)(e));const t=this._graphicsLayer;null!==(e=this.view.map)&&void 0!==e&&e.remove(t),t.destroy()}get sketchGraphic(){return this._get("sketchGraphic")}set sketchGraphic(e){e!==this._get("sketchGraphic")&&(this._set("sketchGraphic",e),this._updateAnalysisFromSketchGraphic())}get state(){const{visible:e,interactive:t}=this.analysisViewData;if(!e)return"idle";switch(this._operationManager.currentOperationType){case"place":return this._sketching?"sketching":"awaiting-sketch";case"pick-feature":return"picking";default:return this._analysis.geometry?t?"reshaping":"reshaping-disabled":"idle"}}get updating(){return this._sketchViewModels.some(e=>e.updating)||this._updatingHandles.updating}get _sketching(){return this._sketchViewModels.some(e=>e.createGraphic===this.sketchGraphic)}get _analysis(){return this.analysisViewData.analysis}get _lineSymbol(){return function(e){if("2d"===e){const e={type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5};return new f.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[(0,i.A)((0,i.A)({},e),{},{effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],color:[0,0,0,255]}),(0,i.A)((0,i.A)({},e),{},{color:[255,255,255,255]})]}}})}return new _.A({color:[0,0,0,0]})}(this.view.type)}place(e){return this._operationManager.start("place",async t=>{const n=this._createSketchViewModel(),i=this._analysis.clone();this._ensureUpdatedSketchGraphic();const o=this.sketchGraphic,s=this._analysis.elevationInfo,r=(0,u.hA)(()=>{this.sketchGraphic===o&&(this._graphicsLayer.elevationInfo=s)}),a=n.on("create",e=>{switch(e.state){case"start":this._graphicsLayer.removeAll(),this.sketchGraphic=e.graphic,this._analysis.elevationInfo=this._graphicsLayer.elevationInfo;break;case"active":this._updateAnalysisFromSketchGraphic();break;case"complete":this.sketchGraphic&&(this._updateAnalysisFromSketchGraphic(),this._addSketchGraphic(this.sketchGraphic)),t.stop();break;case"cancel":t.stop()}});t.handles.push(a,(0,u.hA)(()=>(a.remove(),n.destroy(),this._sketchViewModels.remove(n),this._updateAnalysisFromSketchGraphic(),this._analysis.valid?(0,p.G4)(e)||i.equals(this._analysis)?t.reject():void t.resolve({}):(this._clear(),t.reject()))),r),this._graphicsLayer.elevationInfo=R,await this._updatingHandles.addPromise((0,p.QZ)(n.create("polyline")))},e)}async pickFeature(e){return this._operationManager.start("pick-feature",async e=>{const{view:t}=this;t.closePopup();let n=null;e.handles.push(t.on("immediate-click",o=>{o.defer(async()=>{var s;null!==(s=n)&&void 0!==s&&s.abort(),n=(0,a.UT)(async n=>{const{results:s}=await t.hitTest(o);(0,p.Te)(n);let r=null;for(const e of s)if("graphic"===e.type&&(0,b.lM)(e.graphic)&&!(0,b._W)(e.graphic)){r=e.graphic;break}r?(o.preventDefault(),o.stopPropagation(),this.sketchGraphic=null,this._analysis.geometry=r.geometry,this._analysis.elevationInfo=new w.A((0,i.A)({},(0,y.bh)(r))),e.resolve({feature:r}),e.stop()):e.reject()}),await n.promise})},M.oj.TOOL),t.on("key-down",t=>{(0,S.$X)(t)&&(e.reject(),e.stop())},M.oj.TOOL),t.acquireCursor("crosshair","high"),(0,u.hA)(()=>{var t;null!==(t=n)&&void 0!==t&&t.abort(),e.reject()})),t.focus()},e)}_startReshape(){const e=this._createSketchViewModel();return this._sketchViewModels.add(e),this._operationManager.start("reshape",async t=>{const n=()=>{const t=this._ensureUpdatedSketchGraphic();return t?this._updatingHandles.addPromise(e.update(t,{tool:"reshape"})):Promise.resolve()};if(!this._ensureUpdatedSketchGraphic())return;const i=e.on("update",e=>{this._updateAnalysisFromSketchGraphic(),"complete"===e.state&&("reshaping"===this.state?(0,p.QZ)(n()):t.resolve())});t.handles.push(i,(0,u.hA)(()=>{i.remove(),this._sketchViewModels.remove(e),e.destroy(),t.resolve()})),await n()})}_createSketchViewModel(){return new P.A({layer:this._graphicsLayer,view:this.view,defaultCreateOptions:{mode:"click",hasZ:!0},updateOnGraphicClick:!1,defaultUpdateOptions:{enableMoveAllGraphics:!1,enableRotation:!1,enableScaling:!1,enableZ:!1,highlightOptions:{enabled:!1},multipleSelectionEnabled:!1,reshapeOptions:{shapeOperation:"none"},toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:this._lineSymbol,activeLineSymbol:this._lineSymbol})}_ensureUpdatedSketchGraphic(){var e;const{geometry:t}=this._analysis;if(!t)return this.sketchGraphic=null,this._graphicsLayer.removeAll(),null;const n=null!==(e=this.sketchGraphic)&&void 0!==e?e:this.sketchGraphic=new s.A({symbol:this._lineSymbol,geometry:t});return n.geometry=t,this._addSketchGraphic(n),n}_addSketchGraphic(e){const{graphics:t}=this._graphicsLayer;t.includes(e)||t.add(e),1!==t.length&&t.removeMany(t.filter(t=>t!==e))}_clear(){this.sketchGraphic=null,this._analysis.clear()}_updateAnalysisFromSketchGraphic(){var e;let t=null===(e=this.sketchGraphic)||void 0===e?void 0:e.geometry;(0,b.Rg)(t)||(t=null);const n=this._analysis;n.geometry!==t&&(n.geometry=t)}};(0,o.Cg)([(0,d.MZ)({constructOnly:!0})],Z.prototype,"analysisViewData",void 0),(0,o.Cg)([(0,d.MZ)({constructOnly:!0})],Z.prototype,"view",void 0),(0,o.Cg)([(0,d.MZ)()],Z.prototype,"sketchGraphic",null),(0,o.Cg)([(0,d.MZ)({nonNullable:!0})],Z.prototype,"state",null),(0,o.Cg)([(0,d.MZ)()],Z.prototype,"updating",null),(0,o.Cg)([(0,d.MZ)()],Z.prototype,"_sketching",null),(0,o.Cg)([(0,d.MZ)()],Z.prototype,"_analysis",null),(0,o.Cg)([(0,d.MZ)()],Z.prototype,"_lineSymbol",null),Z=(0,o.Cg)([(0,v.$)("esri.views.analysis.ElevationProfile.ElevationProfileTool")],Z);const R=new w.A({mode:"on-the-ground",offset:0})},73520(e,t,n){n.d(t,{V:()=>s});var i=n(54901),o=n(68134);function s(e){return(0,i.vE)([(0,o.wB)(()=>{const{analysis:t,sketchGraphic:n,toolState:i,visible:o}=e.analysisViewData,{geometryVisualizationVisible:s}=t.viewOptions;return{geometryVisualizationVisible:s,geometry:t.geometry,sketchGraphic:n,toolState:i,visible:o}},t=>{let{geometryVisualizationVisible:n,sketchGraphic:i,toolState:o,visible:s}=t;if(e.remove(),s)return n&&null!=i&&"reshaping"!==o&&"sketching"!==o?e.show(i):void 0},o.pc)])}},80397(e,t,n){n.d(t,{DM:()=>l,ch:()=>a,mW:()=>r});var i=n(18690),o=n(31633),s=n(45564);function r(e,t){const n=e.length;if(0===n)return null;const i=e[0],r=i.sampledZ;let a=r,l=r,p=0,d=0,v=null,g=null,m=null!=r?r:0,y=0,f=0,_=null!=r?1:0,w=0,C=0;const b=(0,o.GA)(t),M=(0,o.G9)(t),S=(0,s.zj)().minSlopeSampleDistance/b,P=2*S,Z=new h,R=new h,k=()=>{E(),Z.copy(R),R.reset()},A=(e,t)=>{k(),e>0&&e-Z.start<=P&&(e=Z.start+S),R.restart(e,t)},E=()=>{if(Z.isHole||R.isHole)return;const e=R.avgElevation-Z.avgElevation,t=R.start-Z.start,n=e*M,i=t*b,s=(0,o.oU)(Math.atan2(n,i),"radians","degrees");s>0?(y+=s,v=c(v,s),w++):s<0&&(f-=s,g=c(g,-s),C++)};null!=i.sampledZ&&A(i.distance,i.sampledZ);for(let o=1;o<n;++o){const t=e[o-1],n=e[o],i=n.sampledZ;if(null==i){R.isHole||k();continue}_++,m+=i,a=u(a,i),l=c(l,i),R.isHole||n.distance-R.start>=S?A(n.distance,i):R.insert(i);const s=t.sampledZ;if(null!=s){const e=i-s;e>0?p+=e:e<0&&(d-=e)}}return k(),0===_?null:{maxDistance:e[n-1].distance,minElevation:a,maxElevation:l,avgElevation:0===_?null:m/_,elevationGain:p,elevationLoss:d,maxPositiveSlope:v,maxNegativeSlope:g,avgPositiveSlope:0===w?null:y/w,avgNegativeSlope:0===C?null:f/C}}function a(e){const t=e.filter(i.Ru),n=t.length;if(0===n)return null;const o=t[0];if(1===n)return o;let s=o.maxDistance,r=o.minElevation,a=o.maxElevation,l=o.maxPositiveSlope,p=o.maxNegativeSlope;for(let i=1;i<t.length;++i){const e=t[i];s=c(s,e.maxDistance),r=u(r,e.minElevation),a=c(a,e.maxElevation),l=c(l,e.maxPositiveSlope),p=c(p,e.maxNegativeSlope)}return{maxDistance:s,minElevation:r,maxElevation:a,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:l,maxNegativeSlope:p,avgPositiveSlope:null,avgNegativeSlope:null}}function l(e){let t=null,n=null,i=null;for(const s of e){if(null==s)continue;const{statistics:e,spatialReference:r}=s;if(null==e)continue;const a=(0,o.GA)(r);t=c(t,p(e.maxDistance,a));const l=(0,o.G9)(r);i=u(i,p(e.minElevation,l)),n=c(n,p(e.maxElevation,l))}return{minDistance:0,maxDistance:null!==t&&void 0!==t?t:0,minElevation:null!==i&&void 0!==i?i:0,maxElevation:null!==n&&void 0!==n?n:0}}function u(e,t){return null==t?e:null!=e?Math.min(e,t):t}function c(e,t){return null==t?e:null!=e?Math.max(e,t):t}function p(e,t){return null!=e&&null!=t?e*t:null}class h{constructor(){this._start=0,this._totalElevation=0,this._sampleCount=0}get avgElevation(){return this._totalElevation/this._sampleCount}get isHole(){return 0===this._sampleCount}get start(){return this._start}copy(e){this._start=e._start,this._sampleCount=e._sampleCount,this._totalElevation=e._totalElevation}reset(){this._start=0,this._sampleCount=0,this._totalElevation=0}restart(e,t){this._start=e,this._sampleCount=1,this._totalElevation=t}insert(e){++this._sampleCount,this._totalElevation+=e}}},80635(e,t,n){function i(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.map)||void 0===n||null===(n=n.allLayers)||void 0===n?void 0:n.toArray().filter(e=>("graphics"!==e.type||!e.internal)&&e.visible).map(e=>e.uid))&&void 0!==t?t:[]}n.d(t,{Y:()=>i})},80674(e,t,n){function i(e,t){let n,i=!1;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];const a=e.apply(this,s);return i&&void 0!==n&&null!==t&&void 0!==t&&t(n,a)?n:(i=!0,n=a,a)}}n.d(t,{f:()=>i})},82185(e,t,n){n.d(t,{R:()=>h});var i=n(6326),o=n(80674),s=n(53084),r=n(68134),a=n(31633),l=n(46053),u=(n(81806),n(76460),n(87990)),c=n(40615),p=n(61607);let h=class extends c.Q{constructor(){super(...arguments),this.type="ground",this.numSamplesForPreview=50,this.numSamplesPerChunk=1e3,this._getStableQueryElevationDependencies=(0,o.f)(()=>({ground:this._ground,groundLayers:this._getStableGroundLayers()}),s.gh),this._getStableGroundLayers=(0,o.f)(()=>{var e;return null===(e=this._ground)||void 0===e||null===(e=e.layers)||void 0===e?void 0:e.toArray()},s.gh)}get minDemResolution(){return(0,p.W)(this._ground)}get available(){var e;return!0===(null===(e=this._ground)||void 0===e?void 0:e.layers.some(e=>e.visible))}initialize(){this.addHandles([(0,r.wB)(()=>this._queryElevationDependencies,()=>this.onInvalidate(this))])}async queryElevation(e,t){const n=this._queryElevationDependencies;if(null==n)throw new Error("".concat(this.declaredClass,": no dependencies"));const{ground:i}=n;if(null==i)throw new Error("No ground configured in the view");const o=await i.queryElevation(e,t),s=(0,a.G9)(e.spatialReference),r=(0,a.G9)(i.layers.at(0).spatialReference);if(s!==r){const e=o.geometry;e.points=e.points.map(e=>{let[n,i,o]=e;return[n,i,o===t.noDataValue?o:o*r/s]})}return o}get _queryElevationDependencies(){return this._getStableQueryElevationDependencies()}get _ground(){var e;return null===(e=this.controller.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.ground}};(0,i.Cg)([(0,l.MZ)()],h.prototype,"minDemResolution",null),(0,i.Cg)([(0,l.MZ)()],h.prototype,"available",null),(0,i.Cg)([(0,l.MZ)()],h.prototype,"_queryElevationDependencies",null),(0,i.Cg)([(0,l.MZ)()],h.prototype,"_ground",null),h=(0,i.Cg)([(0,u.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineGroundComputation")],h)},94656(e,t,n){n.d(t,{n:()=>d});var i=n(6326),o=n(91967),s=n(19276),r=n(68134),a=n(46053),l=(n(81806),n(76460),n(47249),n(87990)),u=n(69539),c=n(56611),p=n(45564);let h=class extends o.A{constructor(e){super(e),this.position=null,this.color=new u.A("#ffffff"),this.element=function(){const e=document.createElement("div"),{size:t,borderStyle:n,borderColor:i,borderWidth:o,boxShadow:s}=(0,p.zj)().hoveredPointsStyle,{style:r}=e;return r.display="block",r.position="absolute",r.top="0",r.left="0",r.contain="strict",r.boxSizing="border-box",r.width="".concat(t,"px"),r.height="".concat(t,"px"),r.marginTop="-".concat(t/2,"px"),r.marginLeft="-".concat(t/2,"px"),r.border="".concat(n," ").concat(o,"px ").concat(i),r.borderRadius="".concat(t,"px"),r.boxShadow=s,e}()}initialize(){var e;this.addHandles([(0,r.wB)(()=>this._screenLocation,e=>{e&&(this.element.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))},r.pc),(0,r.wB)(()=>this.color.toCss(),e=>{this.element.style.background=e},r.pc)]),null===(e=this.view.surface)||void 0===e||e.appendChild(this.element)}destroy(){this.element.remove()}get _screenLocation(){const{position:e,view:t}=this;"3d"===t.type?(t.commitProperty("size"),t.commitProperty("camera")):t.commitProperty("center");const n=null===t||void 0===t?void 0:t.spatialReference,i=n?(0,c.projectOrLoad)(e,n).geometry:null;return i&&null!==t&&void 0!==t&&t.ready?t.toScreen(i):null}};(0,i.Cg)([(0,a.MZ)()],h.prototype,"position",void 0),(0,i.Cg)([(0,a.MZ)({type:u.A})],h.prototype,"color",void 0),(0,i.Cg)([(0,a.MZ)()],h.prototype,"view",void 0),(0,i.Cg)([(0,a.MZ)()],h.prototype,"_screenLocation",null),h=(0,i.Cg)([(0,l.$)("esri.views.analysis.ElevationProfile.ElevationProfileHoveredPointVisualization")],h);let d=class extends o.A{constructor(e){super(e),this._hoveredPoints=new s.A}initialize(){const{analysisViewData:e}=this,{analysis:t}=e;this.addHandles([(0,r.wB)(()=>{const{hoveredPoints:n,visible:i,updating:o}=e;return i?o?null:n.map((e,n)=>{const i=t.profiles.at(n);return!0===(null===i||void 0===i?void 0:i.viewOptions.hoveredPointVisible)&&null!=e?{hoveredPoint:e,color:i.color}:null}).filter(e=>!!e):[]},e=>this._update(e),r.pc),(0,r.wB)(()=>t.geometry,()=>this._update([]),r.pc)])}destroy(){this._hoveredPoints.drain(e=>e.destroy())}get updating(){return!1}_update(e){if(!e)return;const{view:t,_hoveredPoints:n}=this,i=e.length;for(;n.length>i;){var o;null===(o=n.pop())||void 0===o||o.destroy()}for(;n.length<i;){const e=new h({view:t});n.push(e)}for(let s=0;s<i;++s){const t=e[s],o=n.at(i-1-s);o.position=t.hoveredPoint,o.color=t.color}}};(0,i.Cg)([(0,a.MZ)()],d.prototype,"view",void 0),(0,i.Cg)([(0,a.MZ)()],d.prototype,"analysisViewData",void 0),(0,i.Cg)([(0,a.MZ)()],d.prototype,"_hoveredPoints",void 0),(0,i.Cg)([(0,a.MZ)()],d.prototype,"updating",null),d=(0,i.Cg)([(0,l.$)("esri.views.analysis.ElevationProfile.ElevationProfileHoveredPointsVisualization")],d)}}]);
//# sourceMappingURL=13074.122a0899.chunk.js.map