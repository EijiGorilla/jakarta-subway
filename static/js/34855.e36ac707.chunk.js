"use strict";(self.webpackChunkjakarta_subway=self.webpackChunkjakarta_subway||[]).push([[34855],{34855(t,e,s){s.d(e,{execute:()=>n.e});s(18690),s(86867),s(58067);var n=s(91551)},86867(t,e,s){s.d(e,{g:()=>h,f:()=>d});var n=s(68707),r=s(97799),o=s(63331),u=s(91523),c=s(56175),i=c.W;function m(t,e){return{m_geometry:t,m_side:e}}class l extends n.G{constructor(t,e,s,n,r){super(),this.m_cutIndex=-1,this.m_cuts=[],this.m_progressTracker=r,this.m_cuttee=e.clone(),this.m_cutter=new o.P({copy:s}),this.m_bConsiderTouch=t;const c=(0,u.g)(e,s);this.m_tolerance=(0,u.c)(n,c,!0)}next(){return-1===this.m_cutIndex&&this.generateCuts(),++this.m_cutIndex<this.m_cuts.length?this.m_cuts[this.m_cutIndex]:null}getGeometryID(){return this.m_cutIndex}tock(){return!0}getRank(){return 1}generateCuts(){switch(this.m_cuttee.getGeometryType()){case r.G.enumPolyline:this.generatePolylineCuts();break;case r.G.enumPolygon:this.generatePolygonCuts()}}generatePolylineCuts(){const t=new o.P,e=new o.P,s=new o.P;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const n=[];!function(t,e,s,n,r,u){if(e.isEmpty()){const t=m(e,0);return void r.push(t)}if(s.isEmpty()){const t=m(e,0);return void r.push(t)}const l=[],a=new o.E;{const o=a.createGeometryUserIndex(),h=a.addGeometry(e),d=a.addGeometry(s),y=new c.U(u);let p=0,_=null;if(a.hasCurves()){_=new i;const t=a.getEnvelope2D(u);p=(0,c.Q)(n.total());const e=(0,c.R)(n.total(),t);(0,c.T)(a,e,n.total(),12e3,_,null,u)}a.dbgVerifyCurves(),y.setEditShapeCrackAndCluster(a,n),y.cut(t,o,h,d,l);for(const t of l){null!==_&&_.stitchCurves(a,t,p,!1);const e=m(a.getGeometry(t),(0,c.V)(a.getGeometryUserIndex(t,o)));r.push(e)}null!==_&&_.clearStitcher(a)}}(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,n,this.m_progressTracker);for(let o=0;o<n.length;o++){const u=n[o];1===u.m_side?t.add(u.m_geometry,!1):2===u.m_side||4===u.m_side?e.add(u.m_geometry,!1):3===u.m_side?this.m_cuts.push(u.m_geometry):0===u.m_side?s.add(u.m_geometry,!1):(0,r.d)("")}s.isEmpty()||t.isEmpty()&&e.isEmpty()&&!(this.m_cuts.length>=3)||this.m_cuts.push(s),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}generatePolygonCuts(){const t=new o.a,e=new o.a,s=new o.a;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const n=[];!function(t,e,s,n,r,u){if(e.isEmpty()){const t=m(e,0);return void r.push(t)}if(s.isEmpty()){const t=m(e,0);return void r.push(t)}const l=[],a=new o.E;{const t=a.createGeometryUserIndex(),h=a.addGeometry(e),d=a.addGeometry(s),y=new c.U(u);let p=0,_=null;if(a.hasCurves()){_=new i;const t=a.getEnvelope2D(u);p=(0,c.Q)(n.total());const e=(0,c.R)(n.total(),t);(0,c.T)(a,e,n.total(),12e3,_,null,u)}a.dbgVerifyCurves(),y.setEditShapeCrackAndCluster(a,n),y.cut(!1,t,h,d,l),null!==_&&_.stitchCurves(a,o.n,p,!0);let g=a.getGeometry(h);const f=new o.a,C=new o.a,E=[];for(let e=0;e<l.length;e++){let s=null;{const r=new o.E,i=r.addGeometry(g),m=r.addGeometry(a.getGeometry(l[e]));if(r.hasCurves()){const t=r.getEnvelope2D(u);p=(0,c.Q)(n.total());const e=(0,c.R)(n.total(),t);(0,c.T)(r,e,n.total(),12e3,_,null,u)}y.setEditShapeCrackAndCluster(r,n);const h=y.intersection(i,m);if(null!==_&&_.stitchCurves(r,o.n,p,!0),s=r.getGeometry(h),s.isEmpty())continue;const d=a.getGeometryUserIndex(l[e],t);2===d?f.add(s,!1):1===d?C.add(s,!1):E.push(s)}{const t=new o.E,s=t.addGeometry(g),r=t.addGeometry(a.getGeometry(l[e]));if(t.hasCurves()){const e=t.getEnvelope2D(u);p=(0,c.Q)(n.total());const s=(0,c.R)(n.total(),e);(0,c.T)(t,s,n.total(),12e3,_,null,u)}y.setEditShapeCrackAndCluster(t,n);const i=y.difference(s,r);null!==_&&_.stitchCurves(t,o.n,p,!0),g=t.getGeometry(i)}}if(!g.isEmpty()&&l.length>0&&E.push(g),f.isEmpty()&&C.isEmpty())return;if(!f.isEmpty()){const t=m(f,1);r.push(t)}if(!C.isEmpty()){const t=m(C,2);r.push(t)}for(let e=0,s=E.length;e<s;++e){const t=m(E[e],3);r.push(t)}}}(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,n,this.m_progressTracker);for(let o=0;o<n.length;o++){const u=n[o];1===u.m_side?t.add(u.m_geometry,!1):2===u.m_side?e.add(u.m_geometry,!1):3===u.m_side?this.m_cuts.push(u.m_geometry):0===u.m_side?s.add(u.m_geometry,!1):(0,r.d)("")}(0,r.g)(s.isEmpty()||1===n.length),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}}const a=new class{getOperatorType(){return 10005}accelerateGeometry(t,e,s){return!1}canAccelerateGeometry(t){return!1}supportsCurves(){return!0}execute(t,e,s,n,r){return new l(t,e,s,n,r)}};function h(t,e,s){const n=a.execute(!0,t,e,s,null);return Array.from(n)}function d(){return a.supportsCurves()}},91551(t,e,s){s.d(e,{c:()=>i,e:()=>u});var n=s(18690),r=s(86867),o=s(58067);function u(t,e){const s=(0,o.getSpatialReference)(t);return(0,r.g)((0,o.fromGeometry)(t),(0,o.fromPolyline)(e),(0,o.fromSpatialReference)(s)).map(t=>(0,o.toGeometry)(t,s)).filter(n.Ru)}const c=(0,r.f)(),i=Object.freeze(Object.defineProperty({__proto__:null,execute:u,supportsCurves:c},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=34855.e36ac707.chunk.js.map