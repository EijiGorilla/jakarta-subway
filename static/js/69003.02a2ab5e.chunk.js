"use strict";(self.webpackChunkjakarta_subway=self.webpackChunkjakarta_subway||[]).push([[69003],{69003(e,t,i){i.r(t),i.d(t,{ElevationProfileView2D:()=>M});var s=i(88321),a=i(30726),h=i(68134),n=i(48975),l=i(98773),r=i(50346),o=i(90992);class p{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,a.DC)(this._highlightTask),this._highlightHandle=(0,a.xt)(this._highlightHandle)}update(e){if(this.remove(),null==e||(null==(t=e).geometry||"polyline"!==t.geometry.type))return;var t;const i=e.layer;this._highlightTask=(0,l.UT)(async t=>{const s=await this._params.view.whenLayerView(i);(0,r.Te)(t);const a=(0,o.Of)(s)?s:null;a&&(this._highlightHandle=a.highlight(e))})}}var d=i(6326),c=i(39356),u=i(91967),_=i(59784),v=i(79468),g=i(46053),y=(i(81806),i(76460),i(47249),i(87990)),w=i(63733),f=i(89465),m=i(54054),R=i(75042);let b=class extends u.A{constructor(e){super(e),this._chartData=null,this._graphic=new c.A,this._layer=new w.A({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{var t;const{chartData:i}=e;if(null==i)return this.remove();if(!i.refined)return;const s=i.lines.find(e=>e.viewVisualizationEnabled);if(!s)return;this._graphic.geometry=(0,R.T)(s,e.spatialReference),this._graphic.symbol=new f.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:s.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,_.bJ)(s.color).toArray()}]}}});const a=null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.layers;a&&!a.includes(this._layer)&&a.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=(0,m.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,v.n)(this._update,e);this.addHandles(i),t=i}this.addHandles((0,h.wB)(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),t,h.pc))}destroy(){this.remove()}remove(){var e;null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e||e.remove(this._layer)}update(e){this._chartData=e}};(0,d.Cg)([(0,g.MZ)()],b.prototype,"view",void 0),(0,d.Cg)([(0,g.MZ)()],b.prototype,"_chartData",void 0),b=(0,d.Cg)([(0,y.$)("esri.widgets.ElevationProfile.support.ProfileLine2D")],b);class M{constructor(e,t){this._handles=new s.A,this._inputRepresentation=new p({view:e}),this._hoveredPoints=new n.t({view:e}),this._profileLine=new b({view:e}),this._handles.add([(0,h.wB)(()=>t.viewModel.hoveredPoints,e=>this._hoveredPoints.update(e),h.pc),(0,h.wB)(()=>{const{state:e,highlightEnabled:i,viewModel:s}=t;return{input:s.input,state:e,highlightEnabled:i}},e=>this._updateInputRepresentation(e),h.pc),(0,h.wB)(()=>t.viewModel.chartData,e=>this._profileLine.update(e),h.pc),(0,h.wB)(()=>{var e;return null===(e=t.viewModel.input)||void 0===e?void 0:e.geometry},()=>{this._profileLine.remove()},h.pc)])}destroy(){this._handles=(0,a.pR)(this._handles),this._inputRepresentation=(0,a.pR)(this._inputRepresentation),this._hoveredPoints=(0,a.pR)(this._hoveredPoints),this._profileLine=(0,a.pR)(this._profileLine)}_updateInputRepresentation(e){let{input:t,state:i,highlightEnabled:s}=e;"selected"===i&&s?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}}}]);
//# sourceMappingURL=69003.02a2ab5e.chunk.js.map