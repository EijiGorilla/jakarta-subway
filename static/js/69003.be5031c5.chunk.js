"use strict";(self.webpackChunkjakarta_subway=self.webpackChunkjakarta_subway||[]).push([[69003],{48975(e,t,i){i.d(t,{t:()=>c});var o=i(6326),n=i(91967),s=i(19276),r=i(68134),a=i(46053),l=(i(81806),i(76460),i(47249),i(87990)),h=i(54054),d=i(68999);let c=class extends n.A{constructor(e){super(e),this._hoveredPoints=new s.A}initialize(){this.addHandles((0,r.wB)(()=>this._hoveredPoints.toArray().map(e=>{let{anchor:t,element:i}=e;return{screenLocation:t.screenLocation,element:i}}),e=>{for(const{screenLocation:t,element:i}of e)t&&(i.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"))},r.pc))}destroy(){this._hoveredPoints.drain(e=>this._destroyHoveredPoint(e))}update(e){const t=this.view,i=this._hoveredPoints,o=e.length;for(;this._hoveredPoints.length>o;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<o;){var n;const e=this._makeHoveredPoint();i.push(e),null===(n=t.surface)||void 0===n||n.appendChild(e.element)}for(let s=0;s<o;++s){const t=i.at(o-1-s),n=e[s];this._updateHoveredPoint(t,n)}}_makeHoveredPoint(){const{size:e,borderStyle:t,borderColor:i,borderWidth:o,boxShadow:n}=(0,h.zj)().hoveredPointsStyle,s=this.view,r=new d.A({view:s,screenLocationEnabled:!0}),a=document.createElement("div"),l=a.style;return l.position="absolute",l.top="0",l.left="0",l.contain="strict",l.boxSizing="border-box",l.width="".concat(e,"px"),l.height="".concat(e,"px"),l.marginTop="-".concat(e/2,"px"),l.marginLeft="-".concat(e/2,"px"),l.border="".concat(t," ").concat(o,"px ").concat(i),l.borderRadius="".concat(e,"px"),l.boxShadow=n,{anchor:r,element:a}}_updateHoveredPoint(e,t){let{anchor:i,element:o}=e;i.screenLocationEnabled=!0,i.location=t.hoveredPoint;const n=o.style;n.display="block",n.background=t.color.toCss()}_destroyHoveredPoint(e){var t;let{anchor:i,element:o}=e;i.destroy(),null===(t=this.view.surface)||void 0===t||t.removeChild(o)}};(0,o.Cg)([(0,a.MZ)()],c.prototype,"view",void 0),(0,o.Cg)([(0,a.MZ)()],c.prototype,"_hoveredPoints",void 0),c=(0,o.Cg)([(0,l.$)("esri.widgets.ElevationProfile.support.HoveredPoints")],c)},68999(e,t,i){i.d(t,{A:()=>h});var o=i(6326),n=i(54099),s=i(68134),r=i(46053),a=(i(81806),i(76460),i(47249),i(87990)),l=i(56611);let h=class extends n.nJ{constructor(e){super(e),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([(0,s.z7)(()=>{const e=this.screenLocationEnabled?this.view:null;return e?[e.size,"3d"===e.type?e.camera:e.viewpoint]:null},()=>this.notifyChange("screenLocation")),(0,s.wB)(()=>this.screenLocation,(e,t)=>{null!=e&&null!=t&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this,o=null===t||void 0===t?void 0:t.spatialReference,n=o?(0,l.projectOrLoad)(e,o).geometry:null;return i&&n&&null!==t&&void 0!==t&&t.ready?t.toScreen(n):null}};(0,o.Cg)([(0,r.MZ)()],h.prototype,"location",void 0),(0,o.Cg)([(0,r.MZ)()],h.prototype,"screenLocation",null),(0,o.Cg)([(0,r.MZ)()],h.prototype,"screenLocationEnabled",void 0),(0,o.Cg)([(0,r.MZ)()],h.prototype,"view",void 0),h=(0,o.Cg)([(0,a.$)("esri.widgets.support.AnchorElementViewModel")],h)},69003(e,t,i){i.r(t),i.d(t,{ElevationProfileView2D:()=>L});var o=i(88321),n=i(30726),s=i(68134),r=i(48975),a=i(98773),l=i(50346),h=i(90992);class d{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=(0,n.DC)(this._highlightTask),this._highlightHandle=(0,n.xt)(this._highlightHandle)}update(e){if(this.remove(),null==e||(null==(t=e).geometry||"polyline"!==t.geometry.type))return;var t;const i=e.layer;this._highlightTask=(0,a.UT)(async t=>{const o=await this._params.view.whenLayerView(i);(0,l.Te)(t);const n=(0,h.Of)(o)?o:null;n&&(this._highlightHandle=n.highlight(e))})}}var c=i(6326),p=i(39356),u=i(91967),v=i(59784),_=i(79468),g=i(46053),y=(i(81806),i(76460),i(47249),i(87990)),w=i(63733),f=i(89465),m=i(54054),b=i(75042);let P=class extends u.A{constructor(e){super(e),this._chartData=null,this._graphic=new p.A,this._layer=new w.A({listMode:"hide",internal:!0,title:"Profile line"}),this._update=e=>{var t;const{chartData:i}=e;if(null==i)return this.remove();if(!i.refined)return;const o=i.lines.find(e=>e.viewVisualizationEnabled);if(!o)return;this._graphic.geometry=(0,b.T)(o,e.spatialReference),this._graphic.symbol=new f.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,10],lineDashEnding:"HalfPattern",controlPointEnding:"HalfPattern"}],capStyle:"Butt",width:1.5,color:o.color.toArray()},{type:"CIMSolidStroke",capStyle:"Butt",width:2,color:(0,v.bJ)(o.color).toArray()}]}}});const n=null===(t=this.view)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.layers;n&&!n.includes(this._layer)&&n.add(this._layer)}}initialize(){this._layer.add(this._graphic);const e=(0,m.zj)().profileLinesUpdateThrottleMillis;let t=this._update;if(e>0){const i=(0,_.n)(this._update,e);this.addHandles(i),t=i}this.addHandles((0,s.wB)(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),t,s.pc))}destroy(){this.remove()}remove(){var e;null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e||e.remove(this._layer)}update(e){this._chartData=e}};(0,c.Cg)([(0,g.MZ)()],P.prototype,"view",void 0),(0,c.Cg)([(0,g.MZ)()],P.prototype,"_chartData",void 0),P=(0,c.Cg)([(0,y.$)("esri.widgets.ElevationProfile.support.ProfileLine2D")],P);class L{constructor(e,t){this._handles=new o.A,this._inputRepresentation=new d({view:e}),this._hoveredPoints=new r.t({view:e}),this._profileLine=new P({view:e}),this._handles.add([(0,s.wB)(()=>t.viewModel.hoveredPoints,e=>this._hoveredPoints.update(e),s.pc),(0,s.wB)(()=>{const{state:e,highlightEnabled:i,viewModel:o}=t;return{input:o.input,state:e,highlightEnabled:i}},e=>this._updateInputRepresentation(e),s.pc),(0,s.wB)(()=>t.viewModel.chartData,e=>this._profileLine.update(e),s.pc),(0,s.wB)(()=>{var e;return null===(e=t.viewModel.input)||void 0===e?void 0:e.geometry},()=>{this._profileLine.remove()},s.pc)])}destroy(){this._handles=(0,n.pR)(this._handles),this._inputRepresentation=(0,n.pR)(this._inputRepresentation),this._hoveredPoints=(0,n.pR)(this._hoveredPoints),this._profileLine=(0,n.pR)(this._profileLine)}_updateInputRepresentation(e){let{input:t,state:i,highlightEnabled:o}=e;"selected"===i&&o?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}},75042(e,t,i){i.d(t,{T:()=>n});var o=i(48384);function n(e,t){var i;const n=null!==(i=e.samples)&&void 0!==i?i:[],s=n.length-1,r=[];let a=[];for(let o=0;o<=s;o++){const{x:e,y:t,z:i}=n[o];null!=i&&a.push([e,t,i]),o!==s&&null!=i||!a.length||(r.push(a),a=[])}return(0,o.LZ)(r,t,!0)}}}]);
//# sourceMappingURL=69003.be5031c5.chunk.js.map